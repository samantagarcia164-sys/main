<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>V√¥lei Pro - Ultimate Admin</title>
    
    <link rel="manifest" href="/manifest.json">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="V√¥lei Pro">
    
    <link rel="icon" type="image/png" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAF4lUWHRYbWw6Y29tLmFkb2JlLnhtcAAAAAA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSZYTVAgQ29yZSA5LjAtYzAwMSA3OS5kYjYwM2E3LCAyMDIzLzswNS8zMC0xNTo1ODowNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94bXBNTS8xLjAvIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94bXAvMS4wL3NUeXBlL1N0UmVmIyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSQaG90b3Nob3AgMjQuNyAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6ODcyOENEQzBCN0Y5MTFFRTg4NzlCOEZCMjNDOUM2RTUiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6ODcyOENEQzFCN0Y5MTFFRTg4NzlCOEZCMjNDOUM2RTUiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4NzI4Q0RDRUI3RjkxMUVFODg3OUI4RkIyM0M5QzZFNSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo4NzI4Q0RDRkI3RjkxMUVFODg3OUI4RkIyM0M5QzZFNSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPC94OnhtcG1ldGE+IA0K4p48AAAIdklEQVRYR8VXe0xUVxbP3XceDI8BBpSPSgGVEpSiiE5FpBaV2tWIdRfrNkW3u6bGbX9sYv9oN9m0v2wT27S7f9Tof9v9Y4w1Sbe746Y+wMZYqxatVUEBUVFUfCggw8AAMDzc+53fudfCIM74YmcnN/ecc+/55rvfdy6E/+clN29idWvO7uR7+r6Uq/rW5Nv6pXxeX5w/98Z44/9v+I4+rCfrbYnBEnwX+4T49N7m4605O4XwN0b6yC59W3y6eL++Nf474v4+uL83Xv+X35S35F/K9S3pL4704R044pXfE35Pe4Xv6h/T28W75eF9/pG89w8Y8mK/eX8/3T/R3hX/P9mN/fG8YV78f+D+7fD72t9Vv6M9iBv8RtxWvMpvSgwiVvyqfRbxof5u+Jv6Xb4u7fSNeL4X3mB9f5/8fHwX+x3v8u1wD/49+CH83fBDfD8bXzV8V1uH50u4Z/XveO/fH+8pD95YvTfeH7/vhnsk/57y/u3v+R//84b3eD5Xf9D7B+S+8L6M+Hj85v4f83H+r5v/iI9pXm5+4v596fL9DqxfB/6U/vM/T+G9f4f3eX93C8fX5e7XF+Gf6Of75X3+Y73bMAnfDP5vP/gP/99X8K+Y9Bv/49b9+L9n//N85694P6FfB/4Q/q7+7fO+v8O6vL/DP8wW3v9vS6Ibeu//3K9b9Nfxb5v9zP1b8j93/f+3/H/X/2w3//w5CfyT/5G+E/5/K+9fBf+D/Mv4//of4P+S4m5/6m9+I425u4jY3N3FvIvb5uV/5M78W/0f8X+K4m5u4zcX80//m5v3j+P+u/39y/X//8/9UeK/X//c/w//m5v3p4P+x/r9m/j9+I/5/4X+S89b5U9m4v4rNxW5zcf49f5r/z9/k98Zf5vfx5/kFfi++L/5b+An8Yv6Z+E74F/A/wVb4Lfxl/FXC8Vfwl4jX4W8Tr+Nfof804vXE63C8wP9E6P9E6N+Hwz+Gf4f4f4TfIX4K55WIs4ij5SJxBfEVXEO8RnwOzyPe4r7Xb8Q7+I14D98R18S18BvE63C85Zq/uA7XwS4Tr8PfgF9H/H34OpxPwvE84izid4ifwXkK55twzRdw/wT3T8D6CTwPwjVfwn0Z7v8V4ofwX8E75CKeT7wP54f4Z8XrxXf4C7jXb4b/vPgyPP+S+CX89/FL+CfFf4Y/5XgK6SmE4yicT8M7p8AnEZ6Be56Ed65CvBzh64jXEP8O4YcJP47wMcTfE47w77j4WfxNfBNxCvF97nvdRrxOvI77N8Lr8Lfj5xBfRryJ+EHEv4X4Cvw76HcN4Z9A+B9AfxP6H+T57+G/D/wT6N+A9gLUVmDrAFvHW38m+Dug/wW8/xXid4jvEn6I8EOEHyb8GOK/Ckd+uR7eIdz7EPFHiP9M/DHi/6ZfVYTv5P6bEH9OfAfx7/NfVfGfFX8S4Vfof5XwXfwfRviTCD+Efy/87/LfW8VfwnvN7zH/Lvx74O9Cfzv0fwr9pXoI6U0466A8AOUByE9CexL6O6H8CH5BPI/v57v5fr7v8V09vIdfB7+OeB3uYvXxfw//C7iW45bUu7W8O/mG55f8Wv6ZfFP+L8R9hXgf4Z5UvCfFe+5O8Uv4S8RX8EtwpYg37lP4LfgX8S96wX+M+CO+wBvG38Bfwt/AX8GfxC+J8wU4m3BeR3wFrjE4499H+DHi875bH577Gbyf925v4jL+beJ1xH9B/EfEv+dO8X+I+C4R7yB+G+Jb7uNfI74Vfyt+S8RbxC8Rr8NxN78RtxXvw74O/Dri38bXwXFfx9fB/RH+fW7X4W/i38S9678Nf4Wv47qUv7wK53uIfxeOEvwexLfhOAtv3VnCZxFfgrMKzo+QP4YfQv5/f4T8Efwf4v+iB/UAnPXIvxP+Xfhfwl8i9X6I/iC6g/gd7vPff8Rfwl/EX8Yv4S/jl+BexOtwNf4mvvX7LvxVvK3v7Y047vj68F19beJtxOuw3/G1ifcQb8Xvh9vKtyS8X7ybeCviDfgN4m6v74bX4XiDeB2OV4k3iDcRr8PbRbyZvyre5O9NfBNu7f09/K38R/xt+Kq+TfybeP9f4b/F7R8R/w5+FvEHuFf5Vv6u8rbybUu/5d5Wvh3+N3H8m7id8X4Xfzv87fBd/X0Y7X9X/4D47fyXif9CvL8pE4P7M8H9vD+v9+eVH/Hw7/4Z9wz8L/1Z7y/7s4r//f8B5X5f396K9/tHw/24Y47fOf5v/n8N383fM55PqY/vYjwv/j//Xv5+Ff8v44t/L45/S5/Wf65/3vgZ/DfiZ+AofwI//9bXp50v84f5M/6/eUfP6P+V64X8r8N4X/6l9+X6Xv4XfEfxQz+N437iPfwAfgX/Tfwy91P8Yfws99v4XfwhY3w5wT0I35d4D76S90jEP+Ffwv0mHPHr8fX8Ovyr+Of79XgX+E6H/vW4P/YreR1xF/Fd+F/414vfi8+4r8Xvjfc3fXq8Xvy9xLfi98X759+TjP/Pvxu/Bf+beCOu/6mK/8/fNfy/fH/+fB/Pvxv+v/K//v2p4v+S//X/Txf///f6jL5Nfk/Sj99K9u9fN//b4G/B35K07m/8R9p2Xv4lTf4lKfqXJP/H/1P6X//+FPNW+f/VvNW8fyb//w98X5PzZf6VvJV8Wf+98f/7Uf8Pz/6hN7yTf9nS17w95b3bH77Yv//V5I//978Gf0//+P+4//N/AbI9E1A5eH3lAAAAAElFTkSuQmCC">
    <link rel="apple-touch-icon" href="data:image/png;base64,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">
    
    <meta name="theme-color" content="#007aff">

    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <script defer src="/_vercel/insights/script.js"></script>
    
    <style>
        :root { --ios-blue: #007aff; --ios-orange: #ff9500; }
        body { font-family: -apple-system, sans-serif; -webkit-font-smoothing: antialiased; background-color: #000; color: #fff; overflow-x: hidden; touch-action: manipulation; }
        
        .liquid-bg { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -2; background: linear-gradient(135deg, #1d1d1f 0%, #000 100%); }
        .metaball { position: absolute; border-radius: 50%; filter: blur(60px); opacity: 0.3; }
        .metaball:nth-child(1) { width: 300px; height: 300px; top: -5%; left: -10%; background: var(--ios-blue); }
        .metaball:nth-child(2) { width: 400px; height: 400px; bottom: -10%; right: -10%; background: var(--ios-orange); }

        .glass-card { background: rgba(255, 255, 255, 0.05); -webkit-backdrop-filter: blur(20px); backdrop-filter: blur(20px); border: 1px solid rgba(255, 255, 255, 0.1); }
        .glass-menu { background: rgba(15, 15, 15, 0.9); -webkit-backdrop-filter: blur(20px); backdrop-filter: blur(20px); border-top: 1px solid rgba(255, 255, 255, 0.1); }
        .glass-input { background: rgba(255, 255, 255, 0.07); border: 1px solid rgba(255, 255, 255, 0.1); color: #fff; outline: none; width: 100%; padding: 0.8rem; border-radius: 1rem; }
        
        .ios-btn { transition: transform 0.1s; cursor: pointer; user-select: none; }
        .ios-btn:active { transform: scale(0.95); opacity: 0.8; }
        .active-tab { color: var(--ios-blue); font-weight: 900; }
        
        .hidden { display: none !important; }
        .animate-in { animation: fadeInUp 0.3s ease-out; }
        @keyframes fadeInUp { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        #shufflingContainer { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 9999; background: rgba(0,0,0,0.95); display: flex; flex-direction: column; align-items: center; justify-content: center; }
        .die { width: 60px; height: 60px; background: rgba(255,255,255,0.1); border: 2px solid #fff; border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 35px; animation: roll 0.4s infinite; }
        @keyframes roll { 0%, 100% { transform: rotate(0deg) translateY(0); } 50% { transform: rotate(180deg) translateY(-20px); } }

        .player-tag { display: inline-block; background: rgba(255, 255, 255, 0.1); padding: 5px 12px; border-radius: 10px; margin: 3px; font-weight: 600; font-size: 12px; border: 1px solid transparent; }
        .player-tag.selected { background: var(--ios-blue); border-color: #fff; }
        .placar-numero { font-size: 5rem; font-weight: 900; line-height: 1; }
    </style>
</head>
<body class="pb-28">

    <div class="liquid-bg"><div class="metaball"></div><div class="metaball"></div></div>

    <div id="auth-screen" class="fixed inset-0 z-50 flex items-center justify-center p-6 bg-black">
        <div class="glass-card p-8 rounded-[2.5rem] w-full max-sm space-y-4 text-center animate-in flex flex-col items-center">
            
            <div class="w-20 h-20 rounded-full bg-blue-600/20 border-4 border-white/10 flex items-center justify-center mb-4 shadow-xl">
                <img src="data:image/png;base64,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" alt="V√¥lei Pro Logo" class="w-12 h-12 opacity-80">
            </div>
            
            <h1 class="text-3xl font-black italic mb-6">V√¥lei <span class="text-blue-500">Pro</span></h1>
            <p id="auth-error" class="text-red-400 text-xs hidden font-bold bg-red-500/10 p-2 rounded-lg"></p>
            <button id="google-login-btn" class="ios-btn w-full bg-white text-black py-4 rounded-2xl font-black uppercase text-xs flex items-center justify-center gap-3 tracking-wider"><i class="fab fa-google text-red-500"></i> Google Login</button>
            <div class="flex items-center gap-2 opacity-20 py-2 w-full"><hr class="flex-1 border-white/30"> <span class="text-[9px] font-bold">OU E-MAIL</span> <hr class="flex-1 border-white/30"></div>
            <input type="email" id="emailInput" class="glass-input text-sm" placeholder="E-mail">
            <input type="password" id="passInput" class="glass-input text-sm" placeholder="Senha">
            <div class="flex gap-2 w-full">
                <button id="email-login-btn" class="ios-btn flex-1 bg-blue-600 py-4 rounded-2xl font-black text-[10px] uppercase tracking-wider">Entrar</button>
                <button id="register-btn" class="ios-btn flex-1 bg-white/10 py-4 rounded-2xl font-black text-[10px] uppercase tracking-wider">Criar</button>
            </div>
        </div>
    </div>

    <div id="main-app" class="max-w-md mx-auto hidden animate-in">
        <header class="p-6 pt-10 flex justify-between items-center">
            <h1 class="text-2xl font-black italic uppercase">V√¥lei <span class="text-blue-500">Pro</span></h1>
            <div class="flex gap-2">
                <button id="btnAdmin" onclick="window.abrirAdmin()" class="hidden glass-card px-4 py-2 rounded-2xl text-orange-400"><i class="fas fa-crown"></i></button>
                <button onclick="window.copiarPix()" class="glass-card px-4 py-2 rounded-2xl text-[10px] font-black uppercase tracking-wider">PIX</button>
            </div>
        </header>

        <main class="px-5 space-y-6">
            <div id="aba-lista" class="aba-content space-y-4">
                <div class="glass-card rounded-[2.5rem] p-6 text-center">
                    <span class="text-[10px] font-black uppercase opacity-50 tracking-widest">Arrecada√ß√£o Hoje</span>
                    <div id="vpp" class="text-3xl font-black">R$ 0,00</div>
                    <div class="h-1.5 bg-white/10 rounded-full mt-4 overflow-hidden"><div id="barra" class="h-full bg-green-500 transition-all duration-700" style="width: 0%"></div></div>
                    <p id="infoFin" class="text-[9px] mt-2 opacity-40 font-bold uppercase tracking-wider">0/0 Pagos</p>
                </div>
                <button onclick="window.entrarNaLista()" class="ios-btn w-full bg-blue-600 py-4 rounded-2xl font-black uppercase text-xs tracking-widest shadow-lg shadow-blue-500/10">Me Adicionar ao Jogo</button>
                <div class="flex gap-2">
                    <input type="text" id="nomeConvidado" placeholder="Convidado..." class="glass-input flex-1">
                    <button onclick="window.adicionarConvidado()" class="ios-btn bg-white/20 px-6 rounded-2xl font-black">+</button>
                </div>
                <ul id="listaJogadores" class="space-y-2"></ul>
                <button id="btnLimparSemana" onclick="window.limparListaSemana()" class="hidden w-full py-4 text-[9px] font-black uppercase opacity-20 transition-all hover:opacity-100 tracking-widest">Zerar Lista da Semana</button>
            </div>

            <div id="aba-sorteio" class="aba-content hidden space-y-4">
                <div class="glass-card rounded-[2.5rem] p-6 space-y-4 text-center">
                    <div class="flex justify-between items-center">
                        <span class="text-xs font-black uppercase opacity-40 tracking-wider">Atletas por Time</span>
                        <input type="number" id="qtdPorTime" value="6" class="bg-transparent text-right font-black text-2xl w-12 text-blue-500 outline-none">
                    </div>
                    <button onclick="window.animarESortear()" class="ios-btn w-full bg-white text-black py-5 rounded-2xl font-black uppercase tracking-widest text-sm shadow-xl">Sortear Times üé≤</button>
                </div>
                <div id="dica-troca" class="hidden text-center text-[9px] font-bold text-blue-400 uppercase tracking-widest">Toque nomes para trocar</div>
                <div id="resultadoSorteio" class="space-y-3"></div>
                <button id="btnSalvar" onclick="window.salvarPartida()" class="hidden ios-btn w-full bg-green-600 py-4 rounded-2xl font-black uppercase text-xs tracking-widest">Salvar Partida ‚úÖ</button>
            </div>

            <div id="aba-placar" class="aba-content hidden animate-in">
                <div class="glass-card rounded-[2.5rem] p-8 flex justify-around items-center">
                    <div class="text-center">
                        <input type="text" id="nomeA" value="TIME 1" class="bg-transparent text-center font-black text-xs uppercase mb-4 w-20 outline-none border-b border-white/10">
                        <div id="pontosA" class="placar-numero text-blue-400" onclick="window.alterarPlacar('A', 1)">0</div>
                        <button onclick="window.alterarPlacar('A', -1)" class="opacity-20 mt-4">-1</button>
                    </div>
                    <div class="font-black opacity-10 text-2xl italic">VS</div>
                    <div class="text-center">
                        <input type="text" id="nomeB" value="TIME 2" class="bg-transparent text-center font-black text-xs uppercase mb-4 w-24 outline-none border-b border-white/10">
                        <div id="pontosB" class="placar-numero text-orange-400" onclick="window.alterarPlacar('B', 1)">0</div>
                        <button onclick="window.alterarPlacar('B', -1)" class="opacity-20 mt-4">-1</button>
                    </div>
                </div>
                <button id="btnZerarPlacar" onclick="window.zerarPlacar()" class="hidden ios-btn w-full py-4 text-[9px] font-black uppercase opacity-20 hover:opacity-100 transition-all tracking-widest mt-5">Zerar Placar Atual</button>
            </div>

            <div id="aba-ranking" class="aba-content hidden space-y-6 animate-in">
                <div class="space-y-4">
                    <h2 class="text-center text-[10px] font-black opacity-40 uppercase tracking-widest">üèÜ Reis da Quadra</h2>
                    <ul id="listaRanking" class="glass-card rounded-3xl p-2 divide-y divide-white/5"></ul>
                </div>
                <div class="space-y-4">
                    <h2 class="text-center text-[10px] font-black opacity-40 uppercase tracking-widest">üïí Hist√≥rico de Jogos</h2>
                    <div id="listaHistorico" class="space-y-4"></div>
                </div>
            </div>

            <div id="aba-perfil" class="aba-content hidden animate-in">
                <div class="glass-card rounded-[2.5rem] p-8 text-center flex flex-col items-center">
                    <img id="perfilFotoBadge" src="https://via.placeholder.com/150" class="w-24 h-24 rounded-full border-4 border-white/10 mb-4 object-cover shadow-2xl">
                    <h2 id="perfilNomeBadge" class="text-2xl font-black uppercase tracking-wider">Atleta</h2>
                    <span id="perfilNivelBadge" class="px-4 py-1 bg-blue-500/20 text-blue-400 rounded-full text-[10px] font-black mt-2 tracking-widest">N√çVEL 3</span>
                    <button onclick="window.editarPerfil()" class="ios-btn w-full mt-8 bg-white/10 py-4 rounded-2xl font-black uppercase text-xs tracking-widest">Editar Meus Dados</button>
                    <button onclick="window.sair()" class="text-red-400 text-[10px] font-black uppercase mt-6 opacity-50 tracking-widest">Sair</button>
                </div>
                <div id="perfil-edicao" class="glass-card rounded-[2.5rem] p-6 hidden space-y-4 mt-4 animate-in">
                    <input type="text" id="perfilNome" class="glass-input text-sm" placeholder="Seu Nome Completo">
                    <input type="text" id="perfilFotoUrl" class="glass-input text-sm" placeholder="Link da Foto (opcional)">
                    <select id="perfilNivel" class="glass-input bg-black text-white text-sm">
                        <option value="1">1 - Iniciante</option><option value="2">2 - B√°sico</option><option value="3" selected>3 - Intermedi√°rio</option><option value="4">4 - Avan√ßado</option><option value="5">5 - Profissional</option>
                    </select>
                    <button onclick="window.salvarPerfil()" class="ios-btn w-full bg-blue-600 py-4 rounded-2xl font-black uppercase text-xs tracking-widest mt-2">Salvar Perfil</button>
                </div>
            </div>
        </main>

        <footer class="fixed bottom-4 left-0 w-full z-40 px-4">
            <nav class="glass-menu rounded-[2rem] p-1 flex justify-around items-center max-w-md mx-auto shadow-2xl shadow-black/50">
                <button onclick="window.mudarAba('lista')" id="btn-tab-lista" class="tab-btn active-tab p-4 flex flex-col items-center text-xl"><i class="fas fa-users"></i></button>
                <button onclick="window.mudarAba('sorteio')" id="btn-tab-sorteio" class="tab-btn opacity-40 p-4 flex flex-col items-center text-xl"><i class="fas fa-random"></i></button>
                <button onclick="window.mudarAba('placar')" id="btn-tab-placar" class="tab-btn opacity-40 p-4 flex flex-col items-center text-xl"><i class="fas fa-volleyball-ball"></i></button>
                <button onclick="window.mudarAba('ranking')" id="btn-tab-ranking" class="tab-btn opacity-40 p-4 flex flex-col items-center text-xl"><i class="fas fa-trophy"></i></button>
                <button onclick="window.mudarAba('perfil')" id="btn-tab-perfil" class="tab-btn opacity-40 p-4 flex flex-col items-center text-xl"><i class="fas fa-user"></i></button>
            </nav>
        </footer>
    </div>

    <div id="shufflingContainer" class="hidden">
        <div class="die">üé≤</div>
        <div class="mt-4 font-black text-blue-400 tracking-widest animate-pulse uppercase text-xs">Sorteando Times...</div>
    </div>

    <div id="admin-modal" class="fixed inset-0 z-[60] flex items-center justify-center p-6 bg-black/95 backdrop-blur-sm hidden animate-in">
        <div class="glass-card p-8 rounded-[2.5rem] w-full max-w-sm text-center space-y-4">
            <h2 class="text-xl font-black text-orange-400 uppercase tracking-widest">Gest√£o Admin</h2>
            <div class="bg-white/5 p-4 rounded-2xl">
                <p class="text-[10px] font-black uppercase opacity-50 mb-2 tracking-widest">Valor da Quadra (Semana)</p>
                <input type="number" id="valorQuadraSemana" value="350" class="bg-transparent text-center text-2xl font-black text-green-400 outline-none w-full">
            </div>
            <div class="bg-white/5 p-4 rounded-2xl">
                <p class="text-[10px] font-black uppercase opacity-50 mb-1 tracking-widest">Caixa Total Acumulado</p>
                <p id="adm-caixa" class="text-3xl font-black text-green-400">R$ 0,00</p>
            </div>
            <button onclick="window.fecharFinanceiro()" class="ios-btn w-full bg-green-600 py-4 rounded-2xl font-black text-[10px] uppercase tracking-wider shadow-lg shadow-green-500/20">Check-in: Marcar Semana Paga ‚úÖ</button>
            <div class="text-left pt-2">
                <p class="text-[10px] font-black uppercase opacity-40 mb-2 tracking-widest">Semanas Pagas:</p>
                <ul id="listaFinanceira" class="text-[10px] space-y-1 h-32 overflow-y-auto pr-2 divide-y divide-white/5 tracking-wider"></ul>
            </div>
            <button onclick="window.fecharAdmin()" class="ios-btn w-full bg-white/10 py-4 rounded-2xl font-black uppercase text-xs tracking-widest mt-2">Fechar Painel</button>
        </div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getFirestore, collection, addDoc, onSnapshot, doc, updateDoc, deleteDoc, query, orderBy, getDoc, setDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";
        import { getAuth, signInWithEmailAndPassword, createUserWithEmailAndPassword, onAuthStateChanged, signOut, GoogleAuthProvider, signInWithPopup } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

        const firebaseConfig = {
            apiKey: "AIzaSyDxQThqrjNEXmmpreEQwRBaihTAIpoZaAM",
            authDomain: "voleigrupo-b8a5a.firebaseapp.com",
            projectId: "voleigrupo-b8a5a",
            storageBucket: "voleigrupo-b8a5a.firebasestorage.app",
            messagingSenderId: "619450859287",
            appId: "1:619450859287:web:bf9138713eb65b3c514152"
        };
        
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        const auth = getAuth(app);
        const googleProvider = new GoogleAuthProvider();
        const EMAIL_ADMIN = "jhonata_hip.hop@hotmail.com";

        const colJogadores = collection(db, "jogadores");
        const colHistorico = collection(db, "historico");
        const colFinanceiro = collection(db, "financeiro_fechado");
        const placarRef = doc(db, "sistema", "placar_ao_vivo");
        const configRef = doc(db, "sistema", "configuracao");

        let userAtual = null, perfilAtual = null, jogadoresLocal = [], unsubscribes = [], valorQuadraAtual = 350;

        // --- CORRE√á√ÉO DE LOGIN ---
        document.getElementById('google-login-btn').onclick = () => {
            signInWithPopup(auth, googleProvider).catch(err => {
                document.getElementById('auth-error').innerText = "Erro Google: " + err.message;
                document.getElementById('auth-error').classList.remove('hidden');
            });
        };

        document.getElementById('email-login-btn').onclick = () => {
            const email = document.getElementById('emailInput').value;
            const pass = document.getElementById('passInput').value;
            if(!email || !pass) return alert("Preencha e-mail e senha");
            signInWithEmailAndPassword(auth, email, pass).catch(err => {
                document.getElementById('auth-error').innerText = "Acesso Negado: Dados incorretos.";
                document.getElementById('auth-error').classList.remove('hidden');
            });
        };

        document.getElementById('register-btn').onclick = () => {
            const email = document.getElementById('emailInput').value;
            const pass = document.getElementById('passInput').value;
            if(!email || !pass) return alert("Preencha e-mail e senha");
            createUserWithEmailAndPassword(auth, email, pass).catch(err => {
                document.getElementById('auth-error').innerText = "Erro Criar: " + err.message;
                document.getElementById('auth-error').classList.remove('hidden');
            });
        };

        window.sair = () => signOut(auth);

        onAuthStateChanged(auth, async (user) => {
            if (user) {
                userAtual = user;
                document.getElementById('auth-screen').classList.add('hidden');
                document.getElementById('main-app').classList.remove('hidden');
                const isAdmin = user.email === EMAIL_ADMIN;
                document.getElementById('btnAdmin').classList.toggle('hidden', !isAdmin);
                document.getElementById('btnLimparSemana').classList.toggle('hidden', !isAdmin);
                document.getElementById('btnZerarPlacar').classList.toggle('hidden', !isAdmin);
                await carregarPerfil();
                iniciarEscutas();
            } else {
                userAtual = null;
                document.getElementById('auth-screen').classList.remove('hidden');
                document.getElementById('main-app').classList.add('hidden');
                unsubscribes.forEach(u => u());
            }
        });

        // --- SISTEMA E NAVEGA√á√ÉO ---
        async function carregarPerfil() {
            const s = await getDoc(doc(db, "usuarios", userAtual.uid));
            if (s.exists()) {
                perfilAtual = s.data();
                document.getElementById('perfilNomeBadge').innerText = perfilAtual.nome;
                document.getElementById('perfilFotoBadge').src = perfilAtual.fotoUrl || userAtual.photoURL || "https://via.placeholder.com/150";
                document.getElementById('perfilNivelBadge').innerText = "N√çVEL " + (perfilAtual.nivel || 3);
            } else { window.editarPerfil(); }
        }

        window.editarPerfil = () => document.getElementById('perfil-edicao').classList.toggle('hidden');
        window.salvarPerfil = async () => {
            const nomeInput = document.getElementById('perfilNome').value;
            if(!nomeInput) return alert("Insira um nome");
            const d = { nome: nomeInput.toUpperCase(), fotoUrl: document.getElementById('perfilFotoUrl').value, nivel: parseInt(document.getElementById('perfilNivel').value), uid: userAtual.uid };
            await setDoc(doc(db, "usuarios", userAtual.uid), d); carregarPerfil();
        };

        function iniciarEscutas() {
            unsubscribes.push(onSnapshot(configRef, s => {
                if(s.exists()){ 
                    valorQuadraAtual = s.data().valorQuadra || 350;
                    document.getElementById('valorQuadraSemana').value = valorQuadraAtual;
                }
            }));

            unsubscribes.push(onSnapshot(query(colJogadores, orderBy("nome")), snap => {
                const lista = document.getElementById('listaJogadores'); lista.innerHTML = ''; let pagos = 0;
                jogadoresLocal = snap.docs.map(d => ({id: d.id, ...d.data()}));
                jogadoresLocal.forEach(j => {
                    if(j.pago) pagos++;
                    const isAdmin = userAtual.email === EMAIL_ADMIN;
                    const btnPix = isAdmin ? `<button onclick="window.togglePix('${j.id}', ${j.pago})" class="px-4 py-2 rounded-xl ${j.pago ? 'bg-green-600' : 'bg-red-600'} text-[9px] font-black tracking-wider">PIX</button>` : `<span class="text-[9px] font-bold tracking-wider ${j.pago ? 'text-green-500' : 'text-red-500'}">${j.pago ? 'OK' : 'PENDENTE'}</span>`;
                    const btnDel = (isAdmin || userAtual.uid === j.uid) ? `<button onclick="window.deletar('${j.id}')" class="opacity-20 px-2"><i class="fas fa-trash"></i></button>` : '';
                    lista.innerHTML += `<li class="glass-card p-4 rounded-2xl flex justify-between items-center animate-in"><div><div class="font-bold text-sm tracking-wide">${j.nome}</div><div class="text-[8px] opacity-40 mt-1">${"‚òÖ".repeat(j.nivel||2)}</div></div><div class="flex items-center gap-3">${btnPix}${btnDel}</div></li>`;
                });
                const vpp = jogadoresLocal.length > 0 ? valorQuadraAtual/jogadoresLocal.length : 0;
                document.getElementById('vpp').innerText = "R$ " + (pagos * vpp).toFixed(2);
                document.getElementById('barra').style.width = ((pagos/jogadoresLocal.length)*100) + "%";
                document.getElementById('infoFin').innerText = `${pagos}/${jogadoresLocal.length} Pagos`;
            }));

            // HISTORICO E RANKING CORRIGIDOS
            unsubscribes.push(onSnapshot(query(colHistorico, orderBy("criadoEm", "desc")), snap => {
                const histDiv = document.getElementById('listaHistorico'), rankUl = document.getElementById('listaRanking');
                histDiv.innerHTML = ''; rankUl.innerHTML = ''; let ranking = {}, acumuladoTotal = 0;
                const isAdmin = userAtual.email === EMAIL_ADMIN;

                snap.forEach(d => {
                    const p = d.data(); const pId = d.id;
                    acumuladoTotal += (p.arrecadado || 0);
                    let tHtml = p.times.map((t, i) => {
                        t.membros.forEach(m => { if(!ranking[m]) ranking[m]=0; ranking[m] += (t.vitorias || 0); });
                        return `<div class="flex justify-between items-center py-2 border-b border-white/5 last:border-0"><div class="text-xs font-bold w-2/3 tracking-wide">${t.membros.join(', ')}</div><div class="flex items-center gap-3"><button onclick="window.vit('${pId}',${i},-1)" class="opacity-20">-</button><span class="font-black text-blue-500 w-4 text-center text-sm">${t.vitorias || 0}</span><button onclick="window.vit('${pId}',${i},1)" class="bg-white/10 px-2 rounded-lg">+</button></div></div>`;
                    }).join('');
                    histDiv.innerHTML += `<div class="glass-card p-5 rounded-[2rem]"><div class="flex justify-between text-[9px] opacity-30 mb-2"><span>${p.data}</span></div>${tHtml}</div>`;
                });
                document.getElementById('adm-caixa').innerText = `R$ ${acumuladoTotal.toFixed(2)}`;
                Object.entries(ranking).sort((a,b)=>b[1]-a[1]).forEach(([n, v], i) => {
                    if(v > 0) rankUl.innerHTML += `<li class="flex justify-between p-4 text-xs tracking-wide"><span>${i+1}¬∫ ${n} ${i===0?'üëë':''}</span><span class="font-bold">${v} vit√≥rias</span></li>`;
                });
            }));

            unsubscribes.push(onSnapshot(query(colFinanceiro, orderBy("data", "desc")), snap => {
                const list = document.getElementById('listaFinanceira'); list.innerHTML = '';
                snap.forEach(d => { const f = d.data(); list.innerHTML += `<li class="flex justify-between border-b border-white/5 pb-1"><span>${f.dataString}</span><span class="text-green-400 font-bold">R$ ${f.valor.toFixed(2)}</span></li>`; });
            }));

            unsubscribes.push(onSnapshot(placarRef, s => { if(s.exists()){ const d=s.data(); document.getElementById('pontosA').innerText=d.pontosA||0; document.getElementById('pontosB').innerText=d.pontosB||0; } }));
        }

        // --- ACTIONS ---
        window.entrarNaLista = async () => { if(!perfilAtual) return alert("Crie o perfil"); await addDoc(colJogadores, { uid: userAtual.uid, nome: perfilAtual.nome, nivel: perfilAtual.nivel, pago: false }); };
        window.adicionarConvidado = async () => { const input = document.getElementById('nomeConvidado'); if(!input.value) return; await addDoc(colJogadores, { uid: "c_"+Date.now(), nome: input.value.toUpperCase()+" (C)", nivel: 2, pago: false }); input.value=""; };
        window.togglePix = async (id, s) => await updateDoc(doc(db, "jogadores", id), {pago: !s});
        window.deletar = async (id) => { if(confirm("Remover?")) await deleteDoc(doc(db, "jogadores", id)); };
        window.limparListaSemana = async () => { if(confirm("Zerar?")) { for(let j of jogadoresLocal) await deleteDoc(doc(db, "jogadores", j.id)); } };
        window.delHist = async (id) => { if(confirm("Apagar?")) await deleteDoc(doc(db, "historico", id)); };

        window.fecharFinanceiro = async () => {
            const valorTotalHoje = parseFloat(document.getElementById('vpp').innerText.replace("R$ ", ""));
            if(confirm(`Confirmar pagamento da quadra de hoje? R$ ${valorTotalHoje.toFixed(2)}`)) {
                await addDoc(colFinanceiro, { valor: valorTotalHoje, data: Date.now(), dataString: new Date().toLocaleDateString() });
                alert("Semana marcada como paga!");
            }
        };

        document.getElementById('valorQuadraSemana').onchange = async (e) => {
            await setDoc(configRef, { valorQuadra: parseFloat(e.target.value) });
        };

        window.vit = async (docId, tIdx, val) => {
            const r = doc(db, "historico", docId); const s = await getDoc(r);
            if(!s.exists()) return;
            const ts = s.data().times; ts[tIdx].vitorias = Math.max(0, (ts[tIdx].vitorias || 0) + val);
            await updateDoc(r, { times: ts });
        };

        window.alterarPlacar = async (t, v) => {
            const s = await getDoc(placarRef); const d = s.exists() ? s.data() : { pontosA: 0, pontosB: 0 };
            await setDoc(placarRef, { ...d, ["pontos"+t]: Math.max(0, (d["pontos"+t]||0) + v) });
        };
        window.zerarPlacar = async () => await setDoc(placarRef, { pontosA: 0, pontosB: 0 });

        window.animarESortear = () => {
            if(jogadoresLocal.length < 2) return alert("M√≠nimo 2 atletas na lista");
            document.getElementById('shufflingContainer').classList.remove('hidden');
            setTimeout(() => { document.getElementById('shufflingContainer').classList.add('hidden'); sortear(); }, 1200);
        };

        function sortear() {
            const q = parseInt(document.getElementById('qtdPorTime').value), n = Math.floor(jogadoresLocal.length / q);
            const ord = [...jogadoresLocal].sort((a,b) => (b.nivel||2) - (a.nivel||2));
            timesSorteados = Array.from({length: n}, (_, i) => ({ nome: "TIME " + (i+1), membros: [], nivelTotal: 0, vitorias: 0 }));
            ord.slice(0, n * q).forEach(j => {
                timesSorteados.sort((a,b) => a.membros.length !== b.membros.length ? a.membros.length - b.membros.length : a.nivelTotal - b.nivelTotal);
                timesSorteados[0].membros.push(j.nome); timesSorteados[0].nivelTotal += (j.nivel||2);
            });
            proximosFila = ord.slice(n * q).map(j => j.nome);
            renderSorteio();
        }

        function renderSorteio() {
            const res = document.getElementById('resultadoSorteio');
            res.innerHTML = timesSorteados.map((t, i) => `
                <div class="glass-card p-4 rounded-3xl mb-3 animate-in">
                    <div class="text-[10px] text-blue-400 font-black mb-1 uppercase tracking-widest">${t.nome}</div>
                    <div class="flex flex-wrap">${t.membros.map((m, j) => `<span onclick="window.trocar(${i},${j})" class="player-tag ios-btn ${jogadorTroca && jogadorTroca.t===i && jogadorTroca.j===j ? 'selected' : ''}">${m}</span>`).join('')}</div>
                </div>`).join('');
            if(proximosFila.length > 0) res.innerHTML += `<div class="p-4 border border-dashed border-white/20 rounded-3xl text-[10px] opacity-40 tracking-wider">FILA: ${proximosFila.join(', ')}</div>`;
            document.getElementById('btnSalvar').classList.remove('hidden');
            document.getElementById('dica-troca').classList.remove('hidden');
        }

        window.trocar = (t, j) => {
            if(!jogadorTroca) { jogadorTroca = {t, j}; renderSorteio(); }
            else {
                const j1 = timesSorteados[jogadorTroca.t].membros[jogadorTroca.j], j2 = timesSorteados[t].membros[j];
                timesSorteados[jogadorTroca.t].membros[jogadorTroca.j] = j2; timesSorteados[t].membros[j] = j1;
                jogadorTroca = null; renderSorteio();
            }
        };

        window.salvarPartida = async () => {
            const vpp = jogadoresLocal.length > 0 ? valorQuadraAtual/jogadoresLocal.length : 0;
            const arr = jogadoresLocal.filter(j => j.pago).length * vpp;
            await addDoc(colHistorico, { criadoEm: Date.now(), data: new Date().toLocaleDateString(), times: timesSorteados, proximos: proximosFila, arrecadado: arr });
            alert("Partida Salva!"); window.mudarAba('ranking');
        };

        window.mudarAba = (aba) => {
            document.querySelectorAll('.aba-content').forEach(a => a.classList.add('hidden'));
            document.getElementById('aba-'+aba).classList.remove('hidden');
            document.querySelectorAll('.tab-btn').forEach(b => { b.classList.add('opacity-40'); b.classList.remove('active-tab'); });
            document.getElementById('btn-tab-'+aba).classList.remove('opacity-40');
            document.getElementById('btn-tab-'+aba).classList.add('active-tab');
        };

        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('/sw.js').catch(err => console.log('SW falhou:', err));
        }
    </script>
</body>
</html>
